(this.webpackJsonpcatch_of_the_day=this.webpackJsonpcatch_of_the_day||[]).push([[0],{25:function(e,t,a){e.exports=a(40)},35:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(22),i=a.n(r),l=a(17),c=a(6);function o(e){return s.a.createElement("header",{className:"top"},s.a.createElement("h1",null,"Catch",s.a.createElement("span",{className:"ofThe"},s.a.createElement("span",{className:"of"},"of"),s.a.createElement("span",{className:"the"},"the")),"day"),s.a.createElement("h3",{className:"tagline"},s.a.createElement("span",null,e.tagline)))}function u(e){return(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}function m(e){return e[Math.floor(Math.random()*e.length)]}function h(){var e=["adorable","beautiful","clean","drab","elegant","fancy","glamorous","handsome","long","magnificent","old-fashioned","plain","quaint","sparkling","ugliest","unsightly","angry","bewildered","clumsy","defeated","embarrassed","fierce","grumpy","helpless","itchy","jealous","lazy","mysterious","nervous","obnoxious","panicky","repulsive","scary","thoughtless","uptight","worried"];return"".concat(m(e),"-").concat(m(e),"-").concat(m(["women","men","children","teeth","feet","people","leaves","mice","geese","halves","knives","wives","lives","elves","loaves","potatoes","tomatoes","cacti","foci","fungi","nuclei","syllabuses","analyses","diagnoses","oases","theses","crises","phenomena","criteria","data"]))}function d(e){var t=Object.keys(e.orders).reduce((function(t,a){return e.fishes[a]&&"1"===e.fishes[a].status?t+e.orders[a]*e.fishes[a].price:t}),0);return s.a.createElement("div",{className:"order-wrap"},s.a.createElement("h2",null,"Your Order"),e.loading?s.a.createElement("p",{style:{textAlign:"center"}},"Loading..."):s.a.createElement("div",{className:"order-wrap"},s.a.createElement("ul",{className:"order"},Object.keys(e.orders).map((function(t,a){return e.fishes[t]&&"0"===e.fishes[t].status?s.a.createElement("li",{key:t},"Sorry ",e.fishes[t].name," is currently unavailable ",s.a.createElement("button",{onClick:function(){e.removeOrder(t)}},"\xd7")):e.fishes[t]?s.a.createElement("li",{key:t},s.a.createElement("span",null,e.orders[t],"kg",e.fishes[t].name),s.a.createElement("span",{className:"price"},u(e.orders[t]*e.fishes[t].price)),s.a.createElement("button",{onClick:function(){e.removeOrder(t)}},"\xd7")):s.a.createElement("li",{key:a},"No such fish in our database ",s.a.createElement("button",{onClick:function(){e.removeOrder(t)}},"\xd7"))})),s.a.createElement("li",{className:"total"},s.a.createElement("strong",null,"Total:"),u(t)))))}function f(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useRef)(),i=Object(n.useRef)(),l=Object(n.useRef)(),c=Object(n.useRef)();return s.a.createElement("form",{ref:c,onSubmit:function(n){n.preventDefault();var s={name:t.current.value,price:a.current.value,status:r.current.value,desc:i.current.value,image:l.current.value};c.current.reset(),e.addFish(s)},className:"fish-edit"},s.a.createElement("input",{ref:t,defaultValue:e.fish?e.fish.name:"",type:"text",placeholder:"Fish Name"}),s.a.createElement("input",{ref:a,type:"number",placeholder:"Fish Price"}),s.a.createElement("select",{ref:r},s.a.createElement("option",{value:"1"},"Fresh!"),s.a.createElement("option",{value:"0"},"Sold Out!")),s.a.createElement("textarea",{ref:i,placeholder:"Description"}),s.a.createElement("input",{ref:l,type:"text",placeholder:"Fish Img"}),s.a.createElement("button",{type:"submit"},"+Add Item"))}function p(e){return s.a.createElement("div",null,s.a.createElement("div",{className:"fish-edit"},s.a.createElement("input",{onChange:function(t){e.editFish(e.fishId,t.target.name,t.target.value)},value:e.fish.name,type:"text",name:"name",placeholder:"Fish name"}),s.a.createElement("input",{onChange:function(t){e.editFish(e.fishId,t.target.name,t.target.value)},value:e.fish.price,type:"number",name:"price",placeholder:"Fish price"}),s.a.createElement("select",{onChange:function(t){e.editFish(e.fishId,t.target.name,t.target.value)},value:e.fish.status,name:"status"},s.a.createElement("option",{value:"1"},"Fresh!"),s.a.createElement("option",{value:"0"},"Sold out!")),s.a.createElement("textarea",{onChange:function(t){e.editFish(e.fishId,t.target.name,t.target.value)},value:e.fish.desc,name:"desc",placeholder:"Description"}),s.a.createElement("input",{onChange:function(t){e.editFish(e.fishId,t.target.name,t.target.value)},value:e.fish.image,type:"text",name:"image",placeholder:"Fish Image"}),s.a.createElement("button",{onClick:function(){e.deleteFish(e.fishId)}}," - Remove Item")))}function g(e){return s.a.createElement("div",null,s.a.createElement("h2",null,"Inventory"),e.loading||e.userLoading?s.a.createElement("p",{style:{textAlign:"center"}},"Loading..."):e.userId?e.owner?e.userId===e.owner?Object.keys(e.fishes).length?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{style:{marginBottom:"10px"},onClick:e.logout},"Log out!"),Object.keys(e.fishes).map((function(t){return s.a.createElement(p,{editFish:e.editFish,key:t,deleteFish:e.deleteFish,fishId:t,fish:e.fishes[t]})})),s.a.createElement(f,{addFish:e.addFish})):s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{style:{marginBottom:"10px"},onClick:e.logout},"Log out!"),s.a.createElement("button",{onClick:e.loadSampleFishes},"Load Sample Fishes")):s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{style:{marginBottom:"10px"},onClick:e.logout},"Log out!"),s.a.createElement("p",null,"This store is owned by someone else try another ")):s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{style:{marginBottom:"10px"},onClick:e.logout},"Log out!"),s.a.createElement("p",null,"This store is free to use"),s.a.createElement("button",{onClick:e.claimStore},"Claim Store")):s.a.createElement("nav",{className:"login"},s.a.createElement("p",null,"Sign in to manage you store's inventory"),s.a.createElement("button",{className:"github",onClick:function(){return e.authenticate("github")}},e.loginLoading?"Loading":"Log in with Github"),s.a.createElement("button",{className:"facebook",onClick:function(){return e.authenticate("facebook")}},e.loginLoading?"Loading":"Log in with Facebook"),s.a.createElement("div",null,e.loginError)))}function b(e){return s.a.createElement("li",{className:"menu-fish"},s.a.createElement("img",{src:e.fishObj.image,alt:e.fishObj.name}),s.a.createElement("h3",{className:"fish-name"},e.fishObj.name,s.a.createElement("span",{className:"price"},u(e.fishObj.price))),s.a.createElement("p",null,e.fishObj.desc),s.a.createElement("button",{onClick:function(){return e.addToOrder(e.fishId)},disabled:"1"!==e.fishObj.status},"1"===e.fishObj.status?"Add to order":"Sold out"))}var E={fish1:{name:"Pacific Halibut",image:"/images/hali.jpg",desc:"Everyone\u2019s favorite white fish. We will cut it to the size you need and ship it.",price:1724,status:"1"},fish2:{name:"Lobster",image:"/images/lobster.jpg",desc:"These tender, mouth-watering beauties are a fantastic hit at any dinner party.",price:3200,status:"1"},fish3:{name:"Sea Scallops",image:"/images/scallops.jpg",desc:"Big, sweet and tender. True dry-pack scallops from the icey waters of Alaska. About 8-10 per pound",price:1684,status:"0"},fish4:{name:"Mahi Mahi",image:"/images/mahi.jpg",desc:"Lean flesh with a mild, sweet flavor profile, moderately firm texture and large, moist flakes. ",price:1129,status:"1"},fish5:{name:"King Crab",image:"/images/crab.jpg",desc:"Crack these open and enjoy them plain or with one of our cocktail sauces",price:4234,status:"1"},fish6:{name:"Atlantic Salmon",image:"/images/salmon.jpg",desc:"This flaky, oily salmon is truly the king of the sea. Bake it, grill it, broil it...as good as it gets!",price:1453,status:"1"},fish7:{name:"Oysters",image:"/images/oysters.jpg",desc:"A soft plump oyster with a sweet salty flavor and a clean finish.",price:2543,status:"1"},fish8:{name:"Mussels",image:"/images/mussels.jpg",desc:"The best mussels from the Pacific Northwest with a full-flavored and complex taste.",price:425,status:"1"},fish9:{name:"Jumbo Prawns",image:"/images/prawns.jpg",desc:"With 21-25 two bite prawns in each pound, these sweet morsels are perfect for shish-kabobs.",price:2250,status:"1"}},v=a(7),y=a.n(v);a(30),a(33);function j(){return s.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},s.a.createElement("h4",null,"Loading....."))}var O=function(e){var t=e.match.params.storeId,a=Object(n.useState)(!0),r=Object(c.a)(a,2),i=r[0],u=r[1],m=Object(n.useState)(),h=Object(c.a)(m,2),f=h[0],p=h[1],v=Object(n.useState)({}),O=Object(c.a)(v,2),k=O[0],w=O[1],S=Object(n.useState)(function(){var t=e.match.params.storeId;return JSON.parse(localStorage.getItem(t))||{}}()),F=Object(c.a)(S,2),I=F[0],N=F[1],C=Object(n.useState)(null),x=Object(c.a)(C,2),L=x[0],A=x[1],T=Object(n.useState)(!0),B=Object(c.a)(T,2),P=B[0],R=B[1],D=Object(n.useState)(null),z=Object(c.a)(D,2),J=z[0],M=z[1],_=Object(n.useState)(!1),W=Object(c.a)(_,2),G=W[0],U=W[1],V=Object(n.useState)(""),Y=Object(c.a)(V,2),q=Y[0],K=Y[1];function H(e){var t=Object(l.a)({},I);t[e]=t[e]+1||1,N(t)}return Object(n.useEffect)((function(){!function(){y.a.apps.length||(y.a.initializeApp({apiKey:"AIzaSyC85OTJiMIfODh3EJD8-UGvbn766oit-Ek",authDomain:"nlszekely-projects.firebaseapp.com",databaseURL:"https://nlszekely-projects.firebaseio.com",projectId:"nlszekely-projects",storageBucket:"nlszekely-projects.appspot.com",messagingSenderId:"951390431995",appId:"1:951390431995:web:563d083057e8aee4ecde5e",measurementId:"G-EQ7YY8PJPR"}),y.a.auth().onAuthStateChanged((function(e){e?(A(e.uid),R(!1)):(A(null),R(!1))})));var e=y.a.database().ref("/catch-of-the-day/".concat(t));p(e)}()}),[t]),Object(n.useEffect)((function(){f&&(f.child("fishes").on("value",(function(e){w(e.val()||{}),u(!1)})),f.child("owner").on("value",(function(e){M(e.val()||null)})))}),[f]),Object(n.useEffect)((function(){!function(e){localStorage.setItem(e,JSON.stringify(I))}(t)}),[I,t]),s.a.createElement("div",{className:"catch-of-the-day"},s.a.createElement("div",{className:"menu"},s.a.createElement(o,{tagline:"Fresh Seafood Market"}),i?s.a.createElement(j,null):s.a.createElement("ul",{className:"list-of-fishes"},Object.keys(k).map((function(e){return s.a.createElement(b,{key:e,addToOrder:H,fishId:e,fishObj:k[e]})})))),s.a.createElement(d,{removeOrder:function(e){var t=Object(l.a)({},I);delete t[e],N(t)},loading:i,fishes:k,orders:I}),s.a.createElement(g,{claimStore:function(){f.child("owner").set(L),M(L)},owner:J,authenticate:function(e){var t;switch(U(!0),K(""),e){case"github":t=new y.a.auth.GithubAuthProvider;break;case"facebook":t=new y.a.auth.FacebookAuthProvider;break;default:return null}y.a.auth().signInWithPopup(t).then((function(e){var t=e.user;u(!1),A(t.uid),U(!1),console.log(t)})).catch((function(e){U(!1),console.log(e),K(e.message)}))},logout:function(){y.a.auth().signOut().then((function(){A(null)})).catch((function(e){var t=e.code,a=e.message;window.alert("Error: "+a),console.log(t)}))},loading:i,userId:L,loadSampleFishes:function(){f.child("fishes").set(E)},userLoading:P,fishes:k,editFish:function(e,t,a){f.child("fishes").child(e).child(t).set(a)},deleteFish:function(e){f.child("fishes").child(e).remove()},addFish:function(e){f.child("fishes").child("fish-".concat(Date.now())).set(e)},loginLoading:G,loginError:q}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=a(23),w=a(1);a(35);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k.a,null,s.a.createElement(w.c,null,s.a.createElement(w.a,{exact:!0,path:"/",component:function(e){var t=Object(n.useRef)();return s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.history.push("store/".concat(t.current.value))},className:"store-selector"},s.a.createElement("h2",null,"Please Enter A Store"),s.a.createElement("input",{ref:t,type:"text",defaultValue:h(),required:!0,placeholder:"Store Name"}),s.a.createElement("button",{type:"submit"},"Visit Store"))}}),s.a.createElement(w.a,{exact:!0,path:"/store/:storeId",component:O}),s.a.createElement(w.a,{component:function(e){return s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("h3",null,"Not Found"),s.a.createElement("button",{onClick:function(){e.history.push("/")}},"Back to home"))}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.471ac67f.chunk.js.map